# Variable mappings across tax calculation systems
# Each variable references its statute definition and maps to output columns in each system

variables:
  eitc:
    title: Earned Income Tax Credit
    statute: 26/32/eitc.rac::earned_income_tax_credit  # IRC § 32
    cosilico: cos_eitc
    policyengine: eitc
    taxcalc: eitc
    taxsim: v25

  ctc:
    title: Child Tax Credit (Non-refundable)
    statute: 26/24/ctc.rac::ctc_non_refundable  # IRC § 24(a)
    cosilico: cos_ctc_nonref
    policyengine: non_refundable_ctc
    taxcalc: c07220
    taxsim: v22

  ctc_refundable:
    title: Additional Child Tax Credit (Refundable)
    statute: 26/24/ctc.rac::ctc_refundable  # IRC § 24(h)(5), § 24(d)
    cosilico: cos_ctc_ref
    policyengine: refundable_ctc
    taxcalc: c11070
    taxsim: actc  # TAXSIM uses 'actc' column, not v23

  ctc_total:
    title: Child Tax Credit (Total)
    statute: 26/24/ctc.rac::child_tax_credit  # Combined CTC
    cosilico: cos_ctc_total
    policyengine: ctc
    taxcalc: null  # Sum of c07220 + c11070
    taxsim: null   # Sum of v22 + actc
    derived: true  # Computed from components

  income_tax:
    title: Federal Income Tax
    statute: 26/1/tax.rac::income_tax  # IRC § 1
    cosilico: cos_income_tax
    policyengine: income_tax_before_credits
    taxcalc: iitax
    taxsim: fiitax

  income_tax_before_credits:
    title: Income Tax Before Credits
    statute: 26/1/tax.rac::income_tax_before_credits  # IRC § 1
    cosilico: cos_income_tax
    policyengine: income_tax_before_credits
    taxcalc: c05800
    taxsim: v19  # Tax before credits

  se_tax:
    title: Self-Employment Tax
    statute: 26/1401/se_tax.rac::self_employment_tax  # IRC § 1401
    cosilico: cos_se_tax
    policyengine: self_employment_tax
    policyengine_entity: person  # Needs aggregation to tax_unit
    taxcalc: setax
    taxsim: null  # Not directly available

  niit:
    title: Net Investment Income Tax
    statute: 26/1411/niit.rac::net_investment_income_tax  # IRC § 1411
    cosilico: cos_niit
    policyengine: net_investment_income_tax
    taxcalc: niit
    taxsim: niit

  agi:
    title: Adjusted Gross Income
    statute: 26/62/agi.rac::adjusted_gross_income  # IRC § 62
    cosilico: adjusted_gross_income
    policyengine: adjusted_gross_income
    taxcalc: c00100
    taxsim: v10

  taxable_income:
    title: Taxable Income
    statute: 26/63/taxable_income.rac::taxable_income  # IRC § 63
    cosilico: taxable_income
    policyengine: taxable_income
    taxcalc: c04800
    taxsim: v18

  standard_deduction:
    title: Standard Deduction
    statute: 26/63/standard_deduction.rac::standard_deduction  # IRC § 63(c)
    cosilico: cos_standard_deduction
    policyengine: standard_deduction
    taxcalc: standard
    taxsim: v13

# TAXSIM input variable mappings
taxsim_inputs:
  taxsimid: record_id
  year: tax_year
  state: state_fips  # 0 = federal only
  mstat: filing_status  # 1=single, 2=joint, 3=separate, 4=HOH, 5=widow
  page: head_age
  sage: spouse_age
  depx: num_dependents
  dep13: num_children_under_13
  dep17: num_children_under_17
  dep18: num_children_under_18
  pwages: primary_wages
  swages: spouse_wages
  dividends: dividend_income
  intrec: interest_income
  stcg: short_term_capital_gains
  ltcg: long_term_capital_gains
  otherprop: other_property_income
  nonprop: non_property_income
  pensions: pension_income
  gssi: social_security_income
  ui: unemployment_income
  psemp: primary_self_employment_income
  ssemp: spouse_self_employment_income
  idtl: output_detail_level  # 0=basic, 2=full
