# Variable mappings across tax calculation systems
#
# Keys use fully qualified RAC reference syntax:
#   {jurisdiction}:statute/{title}/{section}#{variable_name}
#
# Example: "us:statute/26/32#eitc" maps to rac-us/statute/26/32.rac variable eitc
#
# This file contains ALL PE and TAXSIM variables organized by IRC section.
# When encoding a new section, find the relevant variables here.

variables:
  # ==========================================================================
  # Title 26, Subtitle A - Income Taxes
  # ==========================================================================

  # --------------------------------------------------------------------------
  # § 1 - Tax Imposed (Rate Tables and Computation)
  # --------------------------------------------------------------------------
  "us:statute/26/1#income_tax":
    title: Federal Income Tax Liability
    description: Final federal income tax after all credits
    policyengine: income_tax
    taxcalc: iitax
    taxsim: fiitax

  "us:statute/26/1#income_tax_before_credits":
    title: Income Tax Before Credits
    description: Tax computed on taxable income before any credits
    policyengine: income_tax_before_credits
    taxcalc: c05800
    taxsim: v28

  "us:statute/26/1#income_tax_before_refundable_credits":
    title: Income Tax Before Refundable Credits
    description: Tax after non-refundable credits, before refundable
    policyengine: income_tax_before_refundable_credits
    taxcalc: null
    taxsim: null

  "us:statute/26/1#regular_tax_before_credits":
    title: Regular Tax Before Credits
    description: Tax on taxable income using regular rates
    policyengine: regular_tax_before_credits
    taxcalc: null
    taxsim: v19

  "us:statute/26/1#income_tax_main_rates":
    title: Tax at Main Rates
    description: Tax computed at ordinary income rates
    policyengine: income_tax_main_rates
    taxcalc: null
    taxsim: null

  "us:statute/26/1#capital_gains_tax":
    title: Capital Gains Tax
    description: Tax on capital gains at preferential rates
    policyengine: capital_gains_tax
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 21 - Child and Dependent Care Credit
  # --------------------------------------------------------------------------
  "us:statute/26/21#cdcc":
    title: Child and Dependent Care Credit
    description: Credit for expenses to care for dependents while working
    policyengine: cdcc
    taxcalc: e32800
    taxsim: v24

  "us:statute/26/21#cdcc_credit_limit":
    title: CDCC Credit Limit
    policyengine: cdcc_credit_limit
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 22 - Credit for Elderly and Disabled
  # --------------------------------------------------------------------------
  "us:statute/26/22#elderly_disabled_credit":
    title: Credit for Elderly and Disabled
    policyengine: elderly_disabled_credit
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 24 - Child Tax Credit
  # --------------------------------------------------------------------------
  "us:statute/26/24#ctc":
    title: Child Tax Credit (Total)
    description: Total CTC including refundable and non-refundable portions
    policyengine: ctc
    taxcalc: null
    taxsim: null
    derived: true

  "us:statute/26/24#non_refundable_ctc":
    title: Child Tax Credit (Non-refundable)
    description: Non-refundable portion limited by tax liability
    policyengine: non_refundable_ctc
    taxcalc: c07220
    taxsim: v22

  "us:statute/26/24#refundable_ctc":
    title: Additional Child Tax Credit (Refundable)
    description: Refundable portion (Additional CTC)
    policyengine: refundable_ctc
    taxcalc: c11070
    taxsim: v23

  "us:statute/26/24#ctc_maximum":
    title: CTC Maximum
    description: Maximum CTC before phase-out
    policyengine: ctc_maximum
    taxcalc: null
    taxsim: null

  "us:statute/26/24#ctc_phase_out":
    title: CTC Phase-out
    description: Phase-out amount based on income
    policyengine: ctc_phase_out
    taxcalc: null
    taxsim: null

  "us:statute/26/24#ctc_qualifying_children":
    title: CTC Qualifying Children
    description: Number of qualifying children for CTC
    policyengine: ctc_qualifying_children
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 25A - Education Credits
  # --------------------------------------------------------------------------
  "us:statute/26/25A#american_opportunity_credit":
    title: American Opportunity Tax Credit
    policyengine: american_opportunity_credit
    taxcalc: null
    taxsim: null

  "us:statute/26/25A#refundable_american_opportunity_credit":
    title: AOTC (Refundable Portion)
    policyengine: refundable_american_opportunity_credit
    taxcalc: null
    taxsim: null

  "us:statute/26/25A#non_refundable_american_opportunity_credit":
    title: AOTC (Non-refundable Portion)
    policyengine: non_refundable_american_opportunity_credit
    taxcalc: null
    taxsim: null

  "us:statute/26/25A#lifetime_learning_credit":
    title: Lifetime Learning Credit
    policyengine: lifetime_learning_credit
    taxcalc: null
    taxsim: null

  "us:statute/26/25A#education_tax_credits":
    title: Education Credits (Total)
    policyengine: education_tax_credits
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 25B - Saver's Credit
  # --------------------------------------------------------------------------
  "us:statute/26/25B#savers_credit":
    title: Saver's Credit
    policyengine: savers_credit
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 25C - Energy Efficient Home Improvement Credit
  # --------------------------------------------------------------------------
  "us:statute/26/25C#energy_efficient_home_improvement_credit":
    title: Energy Efficient Home Improvement Credit
    policyengine: energy_efficient_home_improvement_credit
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 25D - Residential Clean Energy Credit
  # --------------------------------------------------------------------------
  "us:statute/26/25D#residential_clean_energy_credit":
    title: Residential Clean Energy Credit
    policyengine: residential_clean_energy_credit
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 30D - New Clean Vehicle Credit
  # --------------------------------------------------------------------------
  "us:statute/26/30D#new_clean_vehicle_credit":
    title: New Clean Vehicle Credit
    policyengine: new_clean_vehicle_credit
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 32 - Earned Income Tax Credit
  # --------------------------------------------------------------------------
  "us:statute/26/32#eitc":
    title: Earned Income Tax Credit
    description: Federal EITC for low-to-moderate income workers
    policyengine: eitc
    taxcalc: eitc
    taxsim: v25

  "us:statute/26/32#eitc_maximum":
    title: EITC Maximum
    description: Maximum EITC for the filing status and children
    policyengine: eitc_maximum
    taxcalc: null
    taxsim: null

  "us:statute/26/32#eitc_phase_in_rate":
    title: EITC Phase-in Rate
    policyengine: eitc_phase_in_rate
    taxcalc: null
    taxsim: null

  "us:statute/26/32#eitc_phase_out_rate":
    title: EITC Phase-out Rate
    policyengine: eitc_phase_out_rate
    taxcalc: null
    taxsim: null

  "us:statute/26/32#eitc_phase_out_start":
    title: EITC Phase-out Start
    policyengine: eitc_phase_out_start
    taxcalc: null
    taxsim: null

  "us:statute/26/32#eitc_child_count":
    title: EITC Qualifying Children
    policyengine: eitc_child_count
    taxcalc: null
    taxsim: null

  "us:statute/26/32#eitc_eligible":
    title: EITC Eligible
    policyengine: eitc_eligible
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 36B - Premium Tax Credit
  # --------------------------------------------------------------------------
  "us:statute/26/36B#premium_tax_credit":
    title: Premium Tax Credit (ACA)
    policyengine: premium_tax_credit
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 55-59 - Alternative Minimum Tax
  # --------------------------------------------------------------------------
  "us:statute/26/55#alternative_minimum_tax":
    title: Alternative Minimum Tax
    policyengine: alternative_minimum_tax
    taxcalc: c09600
    taxsim: v27

  "us:statute/26/55#amt_income":
    title: AMT Income
    policyengine: amt_income
    taxcalc: null
    taxsim: v26

  "us:statute/26/55#amt_exemption":
    title: AMT Exemption
    policyengine: amt_exemption
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 61 - Gross Income
  # --------------------------------------------------------------------------
  "us:statute/26/61#employment_income":
    title: Wages and Salaries
    description: Compensation for services (W-2 wages)
    policyengine: employment_income
    policyengine_entity: person
    taxcalc: e00200
    taxsim: null  # Input: pwages, swages

  "us:statute/26/61#self_employment_income":
    title: Self-Employment Income
    policyengine: self_employment_income
    policyengine_entity: person
    taxcalc: e00900
    taxsim: null  # Input: psemp, ssemp

  "us:statute/26/61#interest_income":
    title: Interest Income
    policyengine: interest_income
    policyengine_entity: person
    taxcalc: e00300
    taxsim: null  # Input: intrec

  "us:statute/26/61#dividend_income":
    title: Dividend Income
    policyengine: dividend_income
    policyengine_entity: person
    taxcalc: e00600
    taxsim: null  # Input: dividends

  "us:statute/26/61#pension_income":
    title: Pension Income
    policyengine: pension_income
    policyengine_entity: person
    taxcalc: e01500
    taxsim: null  # Input: pensions

  "us:statute/26/61#rental_income":
    title: Rental Income
    policyengine: rental_income
    policyengine_entity: person
    taxcalc: e02000
    taxsim: null

  "us:statute/26/61#alimony_income":
    title: Alimony Income
    policyengine: alimony_income
    policyengine_entity: person
    taxcalc: e00800
    taxsim: null

  "us:statute/26/61#unemployment_compensation":
    title: Unemployment Compensation
    policyengine: taxable_unemployment_compensation
    policyengine_entity: person
    taxcalc: e02300
    taxsim: null  # Input: ui

  "us:statute/26/61#social_security":
    title: Social Security Benefits (Taxable)
    policyengine: taxable_social_security
    policyengine_entity: person
    taxcalc: null
    taxsim: v12

  "us:statute/26/61#earned_income":
    title: Earned Income
    description: Sum of wages and self-employment income
    policyengine: earned_income
    policyengine_entity: person
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 62 - Adjusted Gross Income
  # --------------------------------------------------------------------------
  "us:statute/26/62#adjusted_gross_income":
    title: Adjusted Gross Income
    description: Gross income minus above-the-line deductions
    policyengine: adjusted_gross_income
    taxcalc: c00100
    taxsim: v10

  "us:statute/26/62#above_the_line_deductions":
    title: Above-the-Line Deductions
    policyengine: above_the_line_deductions
    taxcalc: null
    taxsim: null

  "us:statute/26/62#self_employment_tax_ald":
    title: Self-Employment Tax Deduction
    description: Deductible portion of SE tax
    policyengine: self_employment_tax_ald
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 63 - Taxable Income
  # --------------------------------------------------------------------------
  "us:statute/26/63#taxable_income":
    title: Taxable Income
    description: AGI minus deductions and exemptions
    policyengine: taxable_income
    taxcalc: c04800
    taxsim: v18

  "us:statute/26/63#standard_deduction":
    title: Standard Deduction
    policyengine: standard_deduction
    taxcalc: standard
    taxsim: v13

  "us:statute/26/63#basic_standard_deduction":
    title: Basic Standard Deduction
    description: Base amount before additional amounts
    policyengine: basic_standard_deduction
    taxcalc: null
    taxsim: null

  "us:statute/26/63#additional_standard_deduction":
    title: Additional Standard Deduction
    description: Extra amount for elderly/blind
    policyengine: additional_standard_deduction
    taxcalc: null
    taxsim: null

  "us:statute/26/63#itemized_taxable_income_deductions":
    title: Itemized Deductions
    policyengine: itemized_taxable_income_deductions
    taxcalc: c21060
    taxsim: v17

  "us:statute/26/63#taxable_income_deductions":
    title: Deductions from AGI
    description: Standard or itemized deductions
    policyengine: taxable_income_deductions
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 151 - Personal Exemptions
  # --------------------------------------------------------------------------
  "us:statute/26/151#exemptions":
    title: Personal Exemptions
    description: Personal exemptions (suspended 2018-2025)
    policyengine: exemptions
    taxcalc: c04600
    taxsim: v14

  "us:statute/26/151#exemptions_count":
    title: Exemptions Count
    policyengine: exemptions_count
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 164 - State and Local Taxes (SALT)
  # --------------------------------------------------------------------------
  "us:statute/26/164#salt_deduction":
    title: SALT Deduction
    policyengine: salt_deduction
    taxcalc: null
    taxsim: null

  "us:statute/26/164#capped_property_taxes":
    title: Property Taxes (Capped)
    policyengine: capped_property_taxes
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 170 - Charitable Contributions
  # --------------------------------------------------------------------------
  "us:statute/26/170#charitable_deduction":
    title: Charitable Contribution Deduction
    policyengine: charitable_deduction
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 199A - Qualified Business Income Deduction
  # --------------------------------------------------------------------------
  "us:statute/26/199A#qualified_business_income_deduction":
    title: QBI Deduction
    policyengine: qualified_business_income_deduction
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 213 - Medical Expenses
  # --------------------------------------------------------------------------
  "us:statute/26/213#medical_expense_deduction":
    title: Medical Expense Deduction
    policyengine: medical_expense_deduction
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 1401 - Self-Employment Tax
  # --------------------------------------------------------------------------
  "us:statute/26/1401#self_employment_tax":
    title: Self-Employment Tax
    policyengine: self_employment_tax
    policyengine_entity: person
    taxcalc: setax
    taxsim: null

  "us:statute/26/1401#self_employment_social_security_tax":
    title: Self-Employment Social Security Tax
    policyengine: self_employment_social_security_tax
    policyengine_entity: person
    taxcalc: null
    taxsim: null

  "us:statute/26/1401#self_employment_medicare_tax":
    title: Self-Employment Medicare Tax
    policyengine: self_employment_medicare_tax
    policyengine_entity: person
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 1411 - Net Investment Income Tax
  # --------------------------------------------------------------------------
  "us:statute/26/1411#net_investment_income_tax":
    title: Net Investment Income Tax
    policyengine: net_investment_income_tax
    taxcalc: niit
    taxsim: v43

  "us:statute/26/1411#net_investment_income":
    title: Net Investment Income
    policyengine: net_investment_income
    taxcalc: null
    taxsim: null

  # --------------------------------------------------------------------------
  # § 3101/3111 - FICA (Employee/Employer)
  # --------------------------------------------------------------------------
  "us:statute/26/3101#employee_social_security_tax":
    title: Employee Social Security Tax
    policyengine: employee_social_security_tax
    policyengine_entity: person
    taxcalc: null
    taxsim: null

  "us:statute/26/3101#employee_medicare_tax":
    title: Employee Medicare Tax
    policyengine: employee_medicare_tax
    policyengine_entity: person
    taxcalc: null
    taxsim: v44

  "us:statute/26/3101#additional_medicare_tax":
    title: Additional Medicare Tax (0.9%)
    policyengine: additional_medicare_tax
    taxcalc: null
    taxsim: null

  "us:statute/26/3101#employee_payroll_tax":
    title: Employee Payroll Tax (Total FICA)
    policyengine: employee_payroll_tax
    taxcalc: payrolltax
    taxsim: tfica

  "us:statute/26/3111#employer_social_security_tax":
    title: Employer Social Security Tax
    policyengine: employer_social_security_tax
    policyengine_entity: person
    taxcalc: null
    taxsim: null

  "us:statute/26/3111#employer_medicare_tax":
    title: Employer Medicare Tax
    policyengine: employer_medicare_tax
    policyengine_entity: person
    taxcalc: null
    taxsim: null

  # ==========================================================================
  # AGGREGATE/DERIVED VARIABLES
  # ==========================================================================
  "us:statute/26#income_tax_non_refundable_credits":
    title: Non-Refundable Credits (Total)
    policyengine: income_tax_non_refundable_credits
    taxcalc: null
    taxsim: null

  "us:statute/26#income_tax_refundable_credits":
    title: Refundable Credits (Total)
    policyengine: income_tax_refundable_credits
    taxcalc: null
    taxsim: null

  "us:statute/26#household_tax":
    title: Household Tax (Total)
    policyengine: household_tax
    taxcalc: null
    taxsim: null


# ==========================================================================
# TAXSIM Input Variable Reference
# ==========================================================================
taxsim_inputs:
  taxsimid: record_id
  year: tax_year
  state: state_fips  # 0 = federal only
  mstat: filing_status  # 1=single, 2=joint, 3=separate, 4=HOH, 5=widow
  page: head_age
  sage: spouse_age
  depx: num_dependents
  dep13: num_children_under_13  # For CDCC
  dep17: num_children_under_17  # For CTC/EITC
  dep18: num_children_under_18
  pwages: primary_wages
  swages: spouse_wages
  dividends: dividend_income
  intrec: interest_income
  stcg: short_term_capital_gains
  ltcg: long_term_capital_gains
  otherprop: other_property_income
  nonprop: non_property_income
  pensions: pension_income
  gssi: social_security_income
  ui: unemployment_income
  psemp: primary_self_employment_income
  ssemp: spouse_self_employment_income
  idtl: output_detail_level  # 0=basic, 2=full

# ==========================================================================
# TAXSIM Output Variable Reference
# ==========================================================================
taxsim_outputs:
  fiitax: Federal income tax liability (final)
  siitax: State income tax liability
  fica: Total FICA (employee + employer)
  frate: Federal marginal rate
  srate: State marginal rate
  ficar: FICA rate
  tfica: Taxpayer FICA liability (employee portion)
  v10: Federal AGI
  v11: UI in AGI
  v12: Social Security in AGI
  v13: Zero bracket amount (standard deduction)
  v14: Personal exemptions
  v15: Exemption phaseout
  v16: Deduction phaseout
  v17: Itemized deductions
  v18: Federal taxable income
  v19: Tax on taxable income (before special rates)
  v20: Exemption surtax
  v21: General tax credit
  v22: Child Tax Credit (non-refundable)
  v23: Additional Child Tax Credit (refundable)
  v24: Child Care Credit
  v25: Earned Income Credit (federal)
  v26: AMT income
  v27: AMT liability
  v28: Federal income tax before credits
  v29: FICA
  v39: State EIC
  v42: Self-employment income for FICA
  v43: Medicare tax on unearned income (NIIT)
  v44: Medicare tax on earned income
  v45: CARES Recovery Rebates
