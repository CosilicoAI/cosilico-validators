# Variable mappings across tax calculation systems
#
# Keys use fully qualified RAC reference syntax:
#   {jurisdiction}:statute/{title}/{section}#{variable_name}
#
# Example: "us:statute/26/32#eitc" maps to rac-us/statute/26/32.rac variable eitc
#
# This matches the import syntax and supports multi-jurisdiction validation.

variables:
  # ==========================================================================
  # Title 26 - Internal Revenue Code (US)
  # ==========================================================================

  # § 1 - Income Tax
  "us:statute/26/1#income_tax":
    title: Federal Income Tax
    policyengine: income_tax_before_credits
    taxcalc: iitax
    taxsim: fiitax

  "us:statute/26/1#income_tax_before_credits":
    title: Income Tax Before Credits
    policyengine: income_tax_before_credits
    taxcalc: c05800
    taxsim: v19

  # § 21 - Child and Dependent Care Credit
  "us:statute/26/21#child_and_dependent_care_credit":
    title: Child and Dependent Care Credit
    policyengine: cdcc
    taxcalc: e32800
    taxsim: null

  # § 24 - Child Tax Credit
  "us:statute/26/24#non_refundable_ctc":
    title: Child Tax Credit (Non-refundable)
    policyengine: non_refundable_ctc
    taxcalc: c07220
    taxsim: v22

  "us:statute/26/24#refundable_ctc":
    title: Additional Child Tax Credit (Refundable)
    policyengine: refundable_ctc
    taxcalc: c11070
    taxsim: v25  # Refundable CTC portion

  "us:statute/26/24#total_child_tax_credit":
    title: Child Tax Credit (Total)
    policyengine: ctc
    taxcalc: null
    taxsim: null
    derived: true

  # § 32 - Earned Income Tax Credit
  "us:statute/26/32#eitc":
    title: Earned Income Tax Credit
    policyengine: eitc
    taxcalc: eitc
    taxsim: v23  # Federal EIC (v23), not v25 which is refundable CTC

  # § 62 - Adjusted Gross Income
  "us:statute/26/62#adjusted_gross_income":
    title: Adjusted Gross Income
    policyengine: adjusted_gross_income
    taxcalc: c00100
    taxsim: v10

  # § 63 - Taxable Income
  "us:statute/26/63#taxable_income":
    title: Taxable Income
    policyengine: taxable_income
    taxcalc: c04800
    taxsim: v18

  "us:statute/26/63#standard_deduction":
    title: Standard Deduction
    policyengine: standard_deduction
    taxcalc: standard
    taxsim: v13

  # § 1401 - Self-Employment Tax
  "us:statute/26/1401#self_employment_tax":
    title: Self-Employment Tax
    policyengine: self_employment_tax
    policyengine_entity: person
    taxcalc: setax
    taxsim: null

  # § 1411 - Net Investment Income Tax
  "us:statute/26/1411#net_investment_income_tax":
    title: Net Investment Income Tax
    policyengine: net_investment_income_tax
    taxcalc: niit
    taxsim: niit

# ==========================================================================
# External model variable mappings (for PE variables not in RAC yet)
# ==========================================================================
external_variables:
  cdcc_potential:
    title: CDCC Potential (before tax cap)
    policyengine: cdcc_potential
    note: PE internal variable, not a statute concept

# ==========================================================================
# TAXSIM input variable mappings
# ==========================================================================
taxsim_inputs:
  taxsimid: record_id
  year: tax_year
  state: state_fips  # 0 = federal only
  mstat: filing_status  # 1=single, 2=joint, 3=separate, 4=HOH, 5=widow
  page: head_age
  sage: spouse_age
  depx: num_dependents
  dep13: num_children_under_13
  dep17: num_children_under_17
  dep18: num_children_under_18
  pwages: primary_wages
  swages: spouse_wages
  dividends: dividend_income
  intrec: interest_income
  stcg: short_term_capital_gains
  ltcg: long_term_capital_gains
  otherprop: other_property_income
  nonprop: non_property_income
  pensions: pension_income
  gssi: social_security_income
  ui: unemployment_income
  psemp: primary_self_employment_income
  ssemp: spouse_self_employment_income
  idtl: output_detail_level  # 0=basic, 2=full
